# daycount-NBT

[![](https://pic.stackoverflow.wiki/uploadImages/117/24/20/154/2021/08/24/23/08/8cd61849-6a34-4e2d-ad3a-c6056adef05e.svg)](https://github.com/Fallen-Breath/MCDReforged)

MCDR插件，获取和输出服务器开服时间。

## 前置

- nbtlib

## 使用说明

### 指令

`!!day`：查看服务器开服天数。

### API

如果你不是开发者，则无需了解这部分内容。

`getday()`：返回一个整数，代表服务器开服天数。

`get_day_text()`：返回根据配置 !!day 命令应输出的内容。

## 配置插件

### NBT 模式

在一般情况下，使用 NBT 模式无需进行任何配置，到手即用。如果您服务器的 `level.dat` 并非位于 `server/world/level.dat`，则需要手动配置。

用任意编辑器打开配置文件，修改 `nbt_file` 即可。

**注意**：NBT 模式的原理是获取服务器世界运行时间，所以输出的 **并非** 开服时间，而是 **地图的在线总时长**。  如果服务器回档，时间也会被还原到存档时的数值。实际上，这比开服时间更能表达服务器的有效游玩时间（

当然，使用日期模式可以避免这个问题。

### 日期模式

修改配置文件，关闭 NBT 模式并设置日期，即可使用日期模式。

日期格式应为 `%Y-%m-%d`。

### 自定义文字

自定义 `!!day` 命令输出的字符串。用 `$day` 代表开服天数。
